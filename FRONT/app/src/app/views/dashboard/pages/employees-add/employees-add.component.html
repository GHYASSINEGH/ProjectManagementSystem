<!-- create-employee.component.html -->

<div class="card">
    <div class="card-body">
        <h3>Create Employee</h3>

        <form [formGroup]="form" (ngSubmit)="SaveEmployee()">
            <div class="mb-3">
                <label for="fullName">Name</label>
                <input type="text" id="fullName" class="form-control" formControlName="fullName">
                <div *ngIf="form.get('fullName')?.invalid && (form.get('fullName')?.dirty || form.get('fullName')?.touched)">
                    <div *ngIf="form.get('fullName')?.errors?.['required']" class="text-danger">Name is required</div>
                    <div *ngIf="form.get('fullName') instanceof FormControl && !isValidFullName(form.get('fullName')?.value)" class="text-danger">Invalid name</div>

                </div>
            </div>

            <div class="mb-3">
                <label for="email">Email</label>
                <input type="email" id="email" class="form-control" formControlName="email">
                <div *ngIf="form.get('email')?.invalid && (form.get('email')?.dirty || form.get('email')?.touched)">
                    <div *ngIf="form.get('email')?.errors?.['required']" class="text-danger">Email is required</div>
                    <div *ngIf="form.get('email')?.errors?.['email']" class="text-danger">Invalid email format</div>
                </div>
            </div>

            <div class="mb-3">
                <label for="password">Password</label>
                <input type="password" id="password" class="form-control" formControlName="password">
            </div>

            <div class="mb-3">
                <label for="address">Address</label>
                <input type="text" id="address" class="form-control" formControlName="address">
                <div *ngIf="form.get('address')?.invalid && (form.get('address')?.dirty || form.get('address')?.touched)">
                    <div *ngIf="form.get('address')?.errors?.['required']" class="text-danger">Address is required</div>
                </div>
            </div>
            

            <div class="mb-3">
                <label for="phone">Phone</label>
                <input type="text" id="phone" class="form-control" formControlName="phone">
                <div *ngIf="form.get('phone')?.invalid && (form.get('phone')?.dirty || form.get('phone')?.touched)">
                    <div *ngIf="form.get('phone')?.errors?.['required']" class="text-danger">Phone is required</div>
                    <div *ngIf="form.get('phone') instanceof FormControl &&  !isValidPhoneNumber(form.get('phone')?.value)" class="text-danger">Invalid phone number</div>

                </div>
            </div>

            <div class="mb-3">
                <button type="submit" class="btn btn-success" [disabled]="!form.valid || loading">
                    <span *ngIf="!loading">Add Employee</span>
                    <mat-spinner *ngIf="loading" diameter="20" color="primary"></mat-spinner>
                </button>
            </div>

            <div class="alert alert-success" *ngIf="success !== ''">
                {{ success }}
            </div>

            <div class="alert alert-danger" *ngIf="error !== ''">
                {{ error }}
            </div>

        </form>
    </div>
</div>
